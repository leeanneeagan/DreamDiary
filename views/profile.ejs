<!doctype html>
<html>
<head>
  <title>Dream Diary ðŸŒ™âœ¨</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">

   
    <div class="page-header text-center">
      <h1><span class="fa fa-cloud"></span> Dream Diary ðŸŒ™âœ¨</h1>
      <a href="/logout" class="btn btn-default btn-sm">Logout</a>
    </div>

    <div class="row">

      
      <div class="col-sm-6">
        <h3>Your Dreams</h3>

        <% if (dreams && dreams.length === 0) { %>
          <p>No dreams yet â€” add your first one below!</p>
        <% } %>

        <% dreams.forEach(dream => { %>
          <div class="entry mb-3 p-2 border rounded">
            <div class="entry-header">
              <strong class="entry-title"><%= dream.title %></strong>
            </div>
            <div class="entry-content">
              <p><%= dream.content %></p>
            </div>
            <% if(dream.mood){ %>
              <div class="entry-mood"><em>Mood: <%= dream.mood %></em></div>
            <% } %>
            <div class="entry-date"><small>Saved on <%= new Date(dream.createdAt).toLocaleString() %></small></div>
            <div class="entry-actions mt-2">
              <a href="/dreams/<%= dream._id %>/edit" class="btn btn-info btn-xs">
                <i class="fa fa-pencil"></i> Edit
              </a>
              <button class="btn btn-danger btn-xs delete-btn" data-id="<%= dream._id %>">
                <i class="fa fa-trash"></i> Delete
              </button>
            </div>
          </div>
        <% }) %>

      
        <h3>Add a New Dream</h3>
        <% if (user.local.email) { %>
          <form action="/dreams" method="POST">
            <input type="text" placeholder="Title" name="title" required class="form-control mb-2">
            <textarea placeholder="Describe your dream..." name="content" required class="form-control mb-2"></textarea>
            <input type="text" placeholder="Mood (optional)" name="mood" class="form-control mb-2">
            <button type="submit" class="btn btn-success">Save Dream</button>
          </form>
        <% } %>

      </div>
    </div>

  </div>

  <script src="main.js"></script>
</body>
</html>
